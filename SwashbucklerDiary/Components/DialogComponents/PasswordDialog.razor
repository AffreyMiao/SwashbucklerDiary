@namespace SwashbucklerDiary.Components
@inherits DialogFocusComponentBase
@using System.ComponentModel.DataAnnotations
@using FluentValidation;


<MyDialog MyValue="Value"
          MyValueChanged="InternalValueChanged"
          MaxWidth="420"
          @ref="myDialog">
    <MForm @ref="@form" Model="@model" OnValidSubmit="HandleOnOK" EnableValidation EnableI18n>
        <MCard Rounded="@("lg")">
            <MCardTitle>
                @(Title)
                <MSpacer>

                </MSpacer>
                <MButton Icon OnClick="HandleOnCancel">
                    <MIcon>
                        mdi-close
                    </MIcon>
                </MButton>
            </MCardTitle>
            <MCardText Class="pb-0">
                <MTextField @bind-Value="model.Password"
                            @ref="TextField"
                            Dense
                            HideDetails="@("auto")"
                            Outlined
                            Counter="@MaxLength"
                            maxlength="@MaxLength"
                            spellcheck="false"
                            Placeholder="@(I18n.T("Please input a password"))"
                            AppendIcon="@(showPassword1 ? "mdi-eye" : "mdi-eye-off")"
                            Type="@(showPassword1 ? "text" : "password")"
                            OnAppendClick="() => showPassword1 = !showPassword1">
                </MTextField>
                <MTextField @bind-Value="model.PasswordConfirmation"
                            Dense
                            Outlined
                            Counter="@MaxLength"
                            maxlength="@MaxLength"
                            spellcheck="false"
                            Placeholder="@(I18n.T("Please enter the password again"))"
                            AppendIcon="@(showPassword2 ? "mdi-eye" : "mdi-eye-off")"
                            Type="@(showPassword2 ? "text" : "password")"
                            OnAppendClick="() => showPassword2 = !showPassword2">
                </MTextField>

            </MCardText>
            <MCardActions>
                <MSpacer></MSpacer>
                <MButton Text OnClick="HandleOnCancel">
                    @(I18n.T("Share.Cancel"))
                </MButton>
                <MButton Text
                         Type="submit"
                         Color="primary">
                    @(I18n.T("Share.Save"))
                </MButton>
            </MCardActions>
        </MCard>
    </MForm>
</MyDialog>